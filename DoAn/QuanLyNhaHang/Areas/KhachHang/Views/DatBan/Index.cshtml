@using QuanLyNhaHang.Models
@model List<DatBan>

@{
    ViewBag.Title = "Danh Sách Đặt Bàn";
    Layout = "~/Areas/KhachHang/Views/Shared/_LayoutKhachHang.cshtml";
}

<!-- =======================body wrapper========= -->
<div class="body-wrapper">
    <!-- ===================page banner============ -->
    <div class="page-banner" data-background="/Assets/KhachHang/assets/img/page-ban-bg.png">
        <!-- container  -->
        <div class="container">
            <!-- row  -->
            <div class="row">
                <div class="page-ban-content">
                    <h1 class="page-head" data-aos="fade-up" data-aos-duration="1000">Đặt Bàn</h1>
                    <div class="breadcrumb-list" data-aos="fade-up" data-aos-duration="1500">
                        <a href="" class="page-route-link">Home</a>
                        <span class="devider">/</span>
                        <span>Đặt Bàn</span>
                    </div>
                </div>
            </div>
            <!-- row end  -->
        </div>
        <!-- container end -->
    </div>
    <!-- ===================page banner end============ -->
    <!-- ======================cart================ -->
    <div class="cart-section cpy-8">
        <div class="container">
            <div class="row" data-aos="fade-up" data-aos-duration="1000">
                <div class="table-responsive">
                    <table class="table">
                        <thead class="product-table">
                            <tr>
                                <th scope="col">Mã Đặt Bàn</th>
                                <th scope="col">Giờ Vào Tiệc</th>
                                <th scope="col">Giờ Kết Thúc (Dự Kiến)</th>
                                <th scope="col">Số Người</th>
                                <th scope="col">Tổng Tiền (Tạm Tính)</th>
                                <th scope="col">YC Cọc</th>
                                <th scope="col">Trạng Thái</th>
                                <th scope="col">Món Đã Chọn</th>
                                <th scope="col">Hành Động</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>@item.MaDatBan</td>
                                    <td>@item.ThoiGianBatDau</td>
                                    <td>@item.ThoiGianKetThuc</td>
                                    <td>@item.SoNguoi</td>
                                    <td>@string.Format("{0:0,0}", item.TongTienTamTinh)</td>
                                    <td>@string.Format("{0:0,0}", item.SoTienCoc)</td>
                                    <td>
                                        @switch (item.TrangThai)
                                        {
                                            case 0:<span class="status-pending">Chờ Xác Nhận</span>; break;
                                            case 1: <span class="status-confirmed">Đã Xác Nhận</span>; break;
                                            case 2: <span class="status-cancelled">Đã Hủy</span>; break;
                                            default: <span>Không Xác Định</span>; break;
                                        }
                                    </td>
                                    <td>
                                        @if (item.GoiMonTruoc != null && item.GoiMonTruoc.Any())
                                        {
                                            <ul>
                                                @foreach (var mon in item.GoiMonTruoc)
                                                {
                                                    <li>@mon.MonAn.TenMonAn (@mon.SoLuong) - @string.Format("{0:0,0}", mon.SoLuong * mon.DonGia) VNĐ</li>
                                                }
                                            </ul>
                                        }
                                        else
                                        {
                                            <span>Chưa chọn món</span>
                                        }
                                    </td>
                                    <td>
                                        @*<a href="" class="btn btn-primary"><span class="icofont-pencil"></span></a>*@
                                        <a href="/KhachHang/DatBan/HuyDatBan?iMaDatBan=@item.MaDatBan" class="btn btn-danger"><span class="icofont-close"></span></a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>

                </div>
                <div class="shopping-btn">
                    <a href="/KhachHang/DatBan/DatBan" class="custom-btn">Yêu Cầu Đặt Bàn</a>
                </div>
            </div>
        </div>
    </div>
    <!-- ======================cart end================ -->
</div>
<!-- =======================body wrapper end========= -->